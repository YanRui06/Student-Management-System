# 学生管理系统流程图

## 1. 系统整体流程图

```mermaid
graph TD
    A[系统启动] --> B[加载配置文件]
    B --> C[初始化数据库连接]
    C --> D{连接成功?}
    D -->|是| E[显示主菜单]
    D -->|否| F[显示错误信息]
    F --> G[退出系统]
    
    E --> H{用户选择}
    H -->|1| I[查询学生]
    H -->|2| J[添加学生]
    H -->|3| K[修改学生]
    H -->|4| L[删除学生]
    H -->|5| M[退出系统]
    
    I --> N[查询操作流程]
    J --> O[添加操作流程]
    K --> P[修改操作流程]
    L --> Q[删除操作流程]
    
    N --> E
    O --> E
    P --> E
    Q --> E
    M --> G
```

## 2. 查询学生流程图

```mermaid
graph TD
    A[开始查询] --> B{选择查询方式}
    B -->|1| C[查询所有学生]
    B -->|2| D[按学号查询]
    B -->|3| E[按姓名查询]
    B -->|4| F[返回主菜单]
    
    C --> G[调用StudentDAO.getAllStudents]
    D --> H[输入学号]
    E --> I[输入姓名]
    
    H --> J[验证学号格式]
    I --> K[验证姓名格式]
    
    J --> L{格式正确?}
    K --> M{格式正确?}
    
    L -->|是| N[调用StudentDAO.getStudentById]
    L -->|否| O[显示错误提示]
    M -->|是| P[调用StudentDAO.getStudentByName]
    M -->|否| Q[显示错误提示]
    
    G --> R[显示查询结果]
    N --> R
    P --> R
    
    O --> H
    Q --> I
    
    R --> S[返回主菜单]
    F --> S
```

## 3. 添加学生流程图

```mermaid
graph TD
    A[开始添加学生] --> B[输入学号]
    B --> C[验证学号格式]
    C --> D{格式正确?}
    D -->|否| E[显示错误提示]
    E --> B
    
    D -->|是| F[检查学号是否存在]
    F --> G{学号已存在?}
    G -->|是| H[显示重复提示]
    H --> B
    
    G -->|否| I[输入姓名]
    I --> J[验证姓名格式]
    J --> K{格式正确?}
    K -->|否| L[显示错误提示]
    L --> I
    
    K -->|是| M[输入年龄]
    M --> N[验证年龄范围]
    N --> O{年龄有效?}
    O -->|否| P[显示错误提示]
    P --> M
    
    O -->|是| Q[输入地址]
    Q --> R[验证地址长度]
    R --> S{地址有效?}
    S -->|否| T[显示错误提示]
    T --> Q
    
    S -->|是| U[创建Student对象]
    U --> V[调用StudentDAO.addStudent]
    V --> W{添加成功?}
    W -->|是| X[显示成功消息]
    W -->|否| Y[显示失败消息]
    
    X --> Z[返回主菜单]
    Y --> Z
```

## 4. 修改学生流程图

```mermaid
graph TD
    A[开始修改学生] --> B[输入要修改的学号]
    B --> C[验证学号格式]
    C --> D{格式正确?}
    D -->|否| E[显示错误提示]
    E --> B
    
    D -->|是| F[查询学生是否存在]
    F --> G{学生存在?}
    G -->|否| H[显示不存在提示]
    H --> B
    
    G -->|是| I[显示当前学生信息]
    I --> J[输入新姓名]
    J --> K[验证姓名格式]
    K --> L{格式正确?}
    L -->|否| M[显示错误提示]
    M --> J
    
    L -->|是| N[输入新年龄]
    N --> O[验证年龄范围]
    O --> P{年龄有效?}
    P -->|否| Q[显示错误提示]
    Q --> N
    
    P -->|是| R[输入新地址]
    R --> S[验证地址长度]
    S --> T{地址有效?}
    T -->|否| U[显示错误提示]
    U --> R
    
    T -->|是| V[更新Student对象]
    V --> W[调用StudentDAO.updateStudent]
    W --> X{更新成功?}
    X -->|是| Y[显示成功消息]
    X -->|否| Z[显示失败消息]
    
    Y --> AA[返回主菜单]
    Z --> AA
```

## 5. 删除学生流程图

```mermaid
graph TD
    A[开始删除学生] --> B[输入要删除的学号]
    B --> C[验证学号格式]
    C --> D{格式正确?}
    D -->|否| E[显示错误提示]
    E --> B
    
    D -->|是| F[查询学生是否存在]
    F --> G{学生存在?}
    G -->|否| H[显示不存在提示]
    H --> B
    
    G -->|是| I[显示学生信息]
    I --> J[确认删除]
    J --> K{确认删除?}
    K -->|否| L[取消删除]
    L --> M[返回主菜单]
    
    K -->|是| N[调用StudentDAO.deleteStudent]
    N --> O{删除成功?}
    O -->|是| P[显示成功消息]
    O -->|否| Q[显示失败消息]
    
    P --> M
    Q --> M
```

## 6. 数据库操作流程图

```mermaid
graph TD
    A[开始数据库操作] --> B[从ConfigManager获取配置]
    B --> C[创建数据库连接]
    C --> D{连接成功?}
    D -->|否| E[抛出SQLException]
    
    D -->|是| F[创建PreparedStatement]
    F --> G[设置SQL参数]
    G --> H[执行SQL语句]
    H --> I{操作类型}
    
    I -->|查询| J[处理ResultSet]
    I -->|增删改| K[获取影响行数]
    
    J --> L[构建返回结果]
    K --> M[判断操作是否成功]
    
    L --> N[关闭资源]
    M --> N
    N --> O[返回结果]
    
    E --> P[记录错误日志]
    P --> Q[向上层抛出异常]
```

## 7. 配置加载流程图

```mermaid
graph TD
    A[系统启动] --> B[ConfigManager静态初始化]
    B --> C[尝试加载database.properties]
    C --> D{配置文件存在?}
    D -->|否| E[抛出配置文件不存在异常]
    
    D -->|是| F[读取配置文件内容]
    F --> G[解析Properties]
    G --> H[验证必要配置项]
    H --> I{配置完整?}
    
    I -->|否| J[抛出配置不完整异常]
    I -->|是| K[配置加载成功]
    
    E --> L[系统启动失败]
    J --> L
    K --> M[系统正常启动]
```

## 8. 数据验证流程图

```mermaid
graph TD
    A[开始数据验证] --> B{验证类型}
    
    B -->|学号| C[学号格式验证]
    B -->|姓名| D[姓名格式验证]
    B -->|年龄| E[年龄范围验证]
    B -->|地址| F[地址长度验证]
    
    C --> G{学号格式正确?}
    D --> H{姓名格式正确?}
    E --> I{年龄在有效范围?}
    F --> J{地址长度合适?}
    
    G -->|是| K[验证通过]
    G -->|否| L[返回学号格式错误]
    
    H -->|是| K
    H -->|否| M[返回姓名格式错误]
    
    I -->|是| K
    I -->|否| N[返回年龄无效错误]
    
    J -->|是| K
    J -->|否| O[返回地址长度错误]
    
    K --> P[继续业务流程]
    L --> Q[显示错误信息]
    M --> Q
    N --> Q
    O --> Q
    
    Q --> R[重新输入]
```

## 使用说明

以上流程图使用Mermaid语法编写，可以在支持Mermaid的Markdown编辑器中查看，如：

- GitHub
- GitLab
- VS Code (安装Mermaid扩展)
- Typora
- 在线Mermaid编辑器

这些流程图详细展示了学生管理系统的各个业务流程，包括：

1. **系统整体流程** - 展示系统启动到退出的完整流程
2. **查询流程** - 展示各种查询操作的详细步骤
3. **添加流程** - 展示添加学生的完整验证和存储流程
4. **修改流程** - 展示修改学生信息的完整流程
5. **删除流程** - 展示删除学生的确认和执行流程
6. **数据库操作流程** - 展示底层数据库操作的通用流程
7. **配置加载流程** - 展示系统启动时配置文件的加载过程
8. **数据验证流程** - 展示各种数据验证的详细逻辑

这些流程图可以帮助理解系统的工作原理，也可以用于系统文档、培训材料或代码审查。
